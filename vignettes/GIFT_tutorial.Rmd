---
title: "GIFT tutorial"
author: "Pierre Denelle & Patrick Weigelt"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
 %\VignetteIndexEntry{GIFT tutorial}
 %\VignetteEncoding{UTF-8} 
 %\VignetteEngine{knitr::rmarkdown}
editor_options: 
 chunk_output_type: console
---

<style>
body {
text-align: justify}
</style>

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE,
                      fig.width = 8, fig.height = 8)
# Packages --------------------------------------------------------------------
suppressPackageStartupMessages({
  suppressWarnings({
    library("GIFT")
  })
})

options(tinytex.verbose = TRUE)
```

# 1. Overview

The GIFT R package grants an access to the Global Inventory of Floras and
Traits (GIFT) database. This vignette illustrates the most common usages of
the package through three detailed examples:

- 1. Retrieving plant checklists within a given area (example: Mediterranean)
- 2. Getting the distribution of a plant species
- 3. Retrieving trait information for a subset of plant species

\newpage

# 2. Checklists for a region

Let's assume we are interested in having a floristic knowledge of the
Mediterranean basin. For this purpose, we can simply use a shapefile of the
region of interest and feed it to the `GIFT_checklist()` function.  

We do provide a shapefile of this region in the `GIFT` R package, which you
can assess using the `data()` function.

```{r}
data("med")
plot(med)
```

Please note that the projection used in GIFT is the WGS84, and that all
shapefiles provided should be in this CRS. You can check this using
`sf::st_crs().`

```{r, eval = FALSE}
sf::st_crs(med)
```

Now that we have a shape for the region of interest, let's call
`GIFT_checklist()`.

Function returns a list of two tables: metadata and actual checklists.
To get only the metadata, set the argument `list_set_only` to `TRUE`.

```{r, eval=FALSE}
ex <- GIFT_checklist(shp = med, overlap = "centroid_inside",
                     taxon_name = "Angiospermae")

ex_meta <- GIFT_checklist(shp = med, overlap = "centroid_inside",
                          taxon_name = "Angiospermae", list_set_only = TRUE)
```

How complete_taxon works.

```{r, eval=FALSE}
ex <- GIFT_checklist(shp = med, overlap = "centroid_inside",
                     taxon_name = "Angiospermae",
                     complete_taxon = TRUE)
```

How complete_floristic works.

```{r, eval=FALSE}
ex <- GIFT_checklist(shp = med, overlap = "centroid_inside",
                     taxon_name = "Angiospermae",
                     floristic_group = "native",
                     complete_floristic = TRUE)
```

How remove_overlap works.

```{r, eval=FALSE}
ex <- GIFT_checklist(shp = med, overlap = "centroid_inside",
                     taxon_name = "Angiospermae",
                     remove_overlap = TRUE)
```

Function also works with own coordinates, point.

```{r, eval=FALSE}
custom_point <- cbind(9.9, 51)

ex <- GIFT_checklist(coordinates = custom_point, overlap = "extent_intersect",
                     taxon_name = "Angiospermae",
                     remove_overlap = TRUE)
```

# 3. Distribution of species

```{r, eval=FALSE}

```


# 4. Trait data

Raw traits, and traits after taxonomic harmonization.

```{r, eval=FALSE}

```

```{r, eval=FALSE}

```

# 5. References

When using the GIFT database and the GIFT R package, here are the two
resources to cite:

[Weigelt, P., König, C., & Kreft, H. (2020). GIFT – A Global Inventory of Floras and Traits for macroecology and biogeography. Journal of Biogeography, 47(1), 16–43.](https://doi.org/10.1111/jbi.13623)

GIFT R package
